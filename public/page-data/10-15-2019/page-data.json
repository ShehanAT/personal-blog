{"componentChunkName":"component---src-templates-blog-post-js","path":"/10-15-2019/","webpackCompilationHash":"","result":{"data":{"site":{"siteMetadata":{"title":"Web Dev Tutorials","author":"Shehan Atuk "}},"markdownRemark":{"id":"73b2615e-2639-5fb8-9ed8-db9615ee968c","excerpt":"Ever wanted to implement a password reset form or a mailing list feature but didn’t know how? Use Action Mailers! They are a useful tool that brings email…","html":"<p>Ever wanted to implement a password reset form or a mailing list feature but didn’t know how? Use Action Mailers! They are a useful tool that brings email service to Ruby On Rails via SMTP. </p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/30fc116cab5cf65ab8fae237b0d93f21/00189/img2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 55.05050505050505%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAA7CAAAOwgEVKEqAAAACMklEQVQoz53S3WvTUBzG8f6BXnvhhVdeeuX1nANB5t1gIOKUIQMRcZsT9r662XXv2nbduvU1TZOmWZMmbdI0fVnbryfrlF2qCQ8cAvnwnHN+obxWp1R1Uc0mpSsHqWJTsVosfF1ldu4DW+EdkW3WNsJsfouwIda6WcfvXNMf9hmKt98XGQwZDIeEdk+LLGyfsvg9SSyjoVseZYGnCyqpnEKsaBM+r5LIlMgVZCRFw2118NpdjhMGsTODZsuj071mGIBvFvdYPbi8QT9u/iSRlkkWdCq2T1RqsZ+rk9cdDkoC6Q4pqjolzRDgNS+m4oxPJ1m5qJFWDIInNP1ph8n36zx/t8Lc6glnSoOYZHFYcDiRXZSSQlFWuax4RAoeOYGntCY1r8eT8SiPnkaZT5qk5OoInJhZ5uGzWR6MveXVfISa06ZsNCjoLtG8aCY1OZI9jkVk08cR23VaXVriDKdm4oy9XGZ9dw/Pb4/AlGwSOblg98cFubKNrDfEJTlUTJdKrYkmotseZsOn0WzfJEADsFYzyeQlLMu+wQaDAaGsapEXkFSpUxSYfNVAEWDZGIFVgRn1lmjuY7l3wHaPqvi+FlcpKPotKC4lXapxF/0D3ja8+g2KhrYA6wL0Oz1Uw2EjVuRS/Bs+LYnGvdGW08otqP092BYjIul1lg6yZMsWX/YzNP0uBGPzr2CQTq/PuTj7exOfefx6i/uTS9he5/8bBm2CaTg6L3KYSBPPqmi6geu6/ALTrh1povbwvQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"SMTP Protocol\"\n        title=\"SMTP Protocol\"\n        src=\"/static/30fc116cab5cf65ab8fae237b0d93f21/b9e4f/img2.png\"\n        srcset=\"/static/30fc116cab5cf65ab8fae237b0d93f21/cf440/img2.png 148w,\n/static/30fc116cab5cf65ab8fae237b0d93f21/d2d38/img2.png 295w,\n/static/30fc116cab5cf65ab8fae237b0d93f21/b9e4f/img2.png 590w,\n/static/30fc116cab5cf65ab8fae237b0d93f21/00189/img2.png 792w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p align=\"center\">Figure 1: Diagram Of SMTP Protocol</p>\n<h3>Introduction</h3>\n<p>Let’s assume we want to implement a password reset form that emails a password reset link to an entered email address. To do this we will need a action mailer. The plan is to create an action mailer called UserMailer and set it up to send a custom password reset form via email. The email will contain an auto generated link that redirects the user to a password reset form. Although we will skip over the implementation of password reset functionality, how to use an action mailer to send a form via email will be covered. </p>\n<h3>Setting Up</h3>\n<p>First, make a new Rails app called “article” by running:<code class=\"language-text\">rails new article</code>. Then generate a scaffold via: <code class=\"language-text\">rails generate scaffold article title body:text</code>. This should create an article controller, model, view folder, test folder and stylesheets. Now we need to create an action mailer called “user mailer” by running:<code class=\"language-text\">rails generate mailer UserMailer</code>. Navigate to the newly generated <code class=\"language-text\">app/mailers/user_mailer.rb</code> file. In it we will add a method:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">default from: &quot;#{YOUR_DEFAULT_EMAIL}&quot;\n\ndef password_reset(user)\n    @user = user \n    mail :to =&gt; user.email, :subject =&gt; &quot;Password Reset&quot;\nend </code></pre></div>\n<p>Enter your default email address into the <code class=\"language-text\">default from:</code> field as this is the sender’s email address. Now navigate to the empty folder: <code class=\"language-text\">app/views/user_mailer</code>, create a file called <code class=\"language-text\">password_reset.text.erb</code> and add the following content to it: </p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">To reset your password click the link below:\n\n&lt;%= edit_password_reset_url(@user.password_reset_token) %&gt;\n\nIf you did not request to change your password just ignore this email and your password will stay the same.</code></pre></div>\n<p>As previously mentioned, the implementation of password resetting will not be covered so you can hardcode a url for now such as:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">To reset your password click the link below:\n\n&lt;%= link_to &quot;www.example.com/password_reset&quot;, articles_path %&gt;\n\nIf you did not request to change your password just ignore this email and your password will stay the same.</code></pre></div>\n<p>There is some additional code to be included in the <code class=\"language-text\">development.rb</code> file:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\"># config/environment/development.rb\n\n ActionMailer::Base.delivery_method = :smtp\n\n  ActionMailer::Base.smtp_settings = {\n  :address              =&gt; &quot;smtp.gmail.com&quot;,\n  :port                 =&gt; &quot;587&quot;,\n  :domain               =&gt; &quot;#{ENV[&quot;EMAIL_PROVIDER&quot;]}&quot;,# eg: gmail.com\n  :user_name            =&gt; &quot;#{ENV[&quot;EMAIL_USERNAME&quot;]}&quot;,\n  :password             =&gt; &quot;#{ENV[&quot;EMAIL_PASSWORD&quot;]}&quot;,\n  :authentication       =&gt; &quot;plain&quot;,\n  }</code></pre></div>\n<p>Do not forgot to set some ENV variables with the values of your email provider name, email username and email password. This is done to prevent public exposure of your credentials when checking in your code into version control systems such as Github. </p>\n<p>To view how the emails you send will look like fire up the server by running: <code class=\"language-text\">rails server</code> then navigate to <code class=\"language-text\">http://localhost:3000/rails/mailers/user_mailer/user_mailer_preview</code>. The email to be sent should now be displayed, albeit with a fake url but that’s okay for now. </p>\n<h3>Closing Notes</h3>\n<p>Hopefully the mailer works at this point, if not email me for guidance at shehanatuk.com. All in all this is a pretty neat feature of Rails because of the ease at which emails can be sent with. Stay tuned for the implementation of password reset functionality which I will cover in my next post. </p>\n<p>Well that’s all for today, I hope you found this review helpful. I would greatly appreciate if you could check out my <a href=\"https://www.youtube.com/channel/UCtxed_NljgtAXrQMMdLvhrQ?\">Youtube channel</a>, follow me on <a href=\"https://twitter.com/Shehan_Atuk\">Twitter</a>, <a href=\"https://www.linkedin.com/in/shehan-a-780622126/\">LinkedIn</a>, <a href=\"https://github.com/ShehanAT\">Github</a> and <a href=\"https://www.instagram.com/shehanthewebdev/\">Instagram</a>.</p>","frontmatter":{"title":"Action Mailers in Ruby On Rails","date":"October 15, 2019","description":"Basic guide on how to use Action Mailers in Ruby On Rails"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/10-15-2019/","previous":{"fields":{"slug":"/10-11-2019/"},"frontmatter":{"title":"JavaScript AJAX Form Submission in Ruby On Rails"}},"next":null}}}