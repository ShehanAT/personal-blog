{"componentChunkName":"component---src-templates-blog-post-js","path":"/09-20-2019/","webpackCompilationHash":"","result":{"data":{"site":{"siteMetadata":{"title":"Web Dev Tutorials","author":"Shehan Atuk "}},"markdownRemark":{"id":"d06a9532-35b8-5e14-95a4-2bb8948bff78","excerpt":"Hello everyone, Integration testing is very important to the development of software applications. Today I will explain what integration testing is and show how…","html":"<p>Hello everyone,</p>\n<p>Integration testing is very important to the development of software applications. Today I will explain what integration testing is and show how to implement a basic integration test for a sample Ruby On Rails app along with explaining what Capybara is.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 290px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/4ea07617fd324b8f43118185d4a4f83c/8ab82/img1.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 93.79310344827586%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAATABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAIDBf/EABUBAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAHrxcy7JGeZZuD/xAAcEAACAgIDAAAAAAAAAAAAAAAAAQIREyIjMUH/2gAIAQEAAQUCkomglRyCyGw+vbP/xAAWEQADAAAAAAAAAAAAAAAAAAAAEBH/2gAIAQMBAT8BI//EABYRAQEBAAAAAAAAAAAAAAAAABEAEP/aAAgBAgEBPwFnf//EABwQAAEDBQAAAAAAAAAAAAAAAAABESECECAxQf/aAAgBAQAGPwKXJe0Ihqk5h//EAB0QAAIDAAIDAAAAAAAAAAAAAAABESExUWGR0eH/2gAIAQEAAT8hR7OCn0EJCH7E0jSxVtSHlTKt6iXXg//aAAwDAQACAAMAAAAQcAcA/8QAFxEAAwEAAAAAAAAAAAAAAAAAABARcf/aAAgBAwEBPxCGn//EABYRAAMAAAAAAAAAAAAAAAAAAAAQcf/aAAgBAgEBPxAQ/wD/xAAeEAEAAgICAwEAAAAAAAAAAAABABEhMUGRYYGx8P/aAAgBAQABPxBIa04s56lAmG7GtINso1aP2EuSejBqDfIavGYWa3IKSMJa1rDrxFTQcVtdT8BP/9k='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Testing diagram\"\n        title=\"Testing diagram\"\n        src=\"/static/4ea07617fd324b8f43118185d4a4f83c/8ab82/img1.jpg\"\n        srcset=\"/static/4ea07617fd324b8f43118185d4a4f83c/8ee9c/img1.jpg 148w,\n/static/4ea07617fd324b8f43118185d4a4f83c/8ab82/img1.jpg 290w\"\n        sizes=\"(max-width: 290px) 100vw, 290px\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p align=\"center\">Figure 1: Integration testing is the second building block in the overall testing schema.</p>\n<h3>What Is Integration Testing?</h3>\n<p>Integration testing is testing of the integration of individual components of software applications. Basically this is a step up from unit testing. Whereas in unit testing we test individual components, in integration testing we combine those already tested components and test how the components work together as a whole. </p>\n<h3>How Do We Use Integration Testing In Ruby On Rails?</h3>\n<p>We use the ActionDispatch::IntegrationTest library included with Ruby on Rails and the Capybara testing framework for integration testing. </p>\n<p>Capybara is an acceptance testing framework but can be used for integration testing as well. Capybara can be used along with other testing frameworks such as Cucumber, Rspec and Minitest making it very versatile. </p>\n<h3>Installing Capybara</h3>\n<p>Capybara should be already installed if you’re using Rails 6.0.0 or higher but if it’s not then run this command:<code class=\"language-text\">gem install capybara</code> and add <code class=\"language-text\">gem &#39;capybara&#39;, &#39;~&gt; 3.29.0&#39;</code> to your Gemfile. </p>\n<h3>Basic Integration Test</h3>\n<p>Integration tests are mainly used on controllers for Ruby on Rails applications. So let’s create a controller for a sample application called <code class=\"language-text\">Aricles</code>. Run <code class=\"language-text\">rails generate controller Article</code> in the command line. This should generate five files:<code class=\"language-text\">app/views/article</code>, <code class=\"language-text\">app/helpers/article_helper.rb</code>, <code class=\"language-text\">app/assets/stylesheets/article.scss</code>, <code class=\"language-text\">app/controllers/article_controller.rb</code> and <code class=\"language-text\">test/controllers/article_controller_test.rb</code>. The <code class=\"language-text\">app/views/article</code> is the <code class=\"language-text\">.html.erb</code> file used for rendering the content of the view and the <code class=\"language-text\">app/controllers/article_controller.rb</code> file is the corresponding controller file. These two files will be our focus along with the <code class=\"language-text\">article_controller_test.rb</code> file for writing our integration tests. </p>\n<p>Let’s start by uncommenting the default test in the <code class=\"language-text\">article_controller_test.rb</code> file:<code class=\"language-text\">test &quot;the truth&quot; do...</code>. This test acts as a sanity check and confirms that errors in the testing are solely application based and not because of the underlying infrastructure. Now let’s add our first test:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">test &quot;should return 200 status code on get /welcome request&quot; do \n    get &quot;/welcome&quot;\n    assert_response :success\nend </code></pre></div>\n<p>This test sends a GET request to the url <code class=\"language-text\">/welcome</code> and expects a 200 status code, meaning the request/response cycle was successful. Let’s run this test by typing <code class=\"language-text\">rails test RAILS_ENV=test</code> and see what happens:</p>\n<div class=\"gatsby-highlight\" data-language=\"ruby\"><pre class=\"language-ruby\"><code class=\"language-ruby\"><span class=\"token constant\">ActionController</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token constant\">RoutingError</span><span class=\"token punctuation\">:</span> <span class=\"token constant\">No</span> route matches <span class=\"token punctuation\">[</span><span class=\"token constant\">GET</span><span class=\"token punctuation\">]</span> <span class=\"token string\">\"/welcome\"</span>\ntest<span class=\"token operator\">/</span>controllers<span class=\"token operator\">/</span>article_controller_test<span class=\"token punctuation\">.</span>rb<span class=\"token punctuation\">:</span><span class=\"token number\">9</span><span class=\"token symbol\">:in</span> `block \n<span class=\"token keyword\">in</span> <span class=\"token operator\">&lt;</span><span class=\"token keyword\">class</span><span class=\"token symbol\">:ArticleControllerTest</span><span class=\"token operator\">></span>'</code></pre></div>\n<p>An error like this should be render to the command line. Reason being we haven’t defined a route for the “/welcome” url. Let’s fix this by navigating to our <code class=\"language-text\">routes.rb</code> file located at <code class=\"language-text\">config/routes.rb</code> and add this line <code class=\"language-text\">get &quot;/welcome&quot;, to: &quot;article#index&quot;</code> to it. Now go to <code class=\"language-text\">app/controllers/article_controller.rb</code> and add this action to it:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">def index \nend</code></pre></div>\n<p>Then create a file called <code class=\"language-text\">index.html.erb</code> in the <code class=\"language-text\">app/views/article</code> directory. Finally run all tests with <code class=\"language-text\">rails test RAILS_ENV=test</code>. The failing test should now pass. </p>\n<p>So let’s go over what we just did. First we defined the route for the url <code class=\"language-text\">/welcome</code> by adding <code class=\"language-text\">get &quot;/welcome&quot;, to: &quot;article#index&quot;</code>. The <code class=\"language-text\">to</code> section defines the controller action responsible for handling the request to the <code class=\"language-text\">/welcome</code> url, in this case the <code class=\"language-text\">index</code> action of the Article controller. Then we added the action to handle the request in the <code class=\"language-text\">article_controller.rb</code> file. An action basically contains the logic to be executed upon receiving requests configured in the <code class=\"language-text\">routes.rb</code> file. Notice we did not include any code inside the action itself. This is because by default the action will render a <code class=\"language-text\">.html.erb</code> file corresponding to it’s name. So when the <code class=\"language-text\">index.html.erb</code> file was added to the <code class=\"language-text\">app/views</code> directory the action automatically knew to render that view and in doing so made the integration test we added pass. </p>\n<p>I will end here for the sake of brevity, but stay tuned for part 2 where I show how to use Capybara for integration testing. </p>\n<p>Well that’s all for today, I hope you found this review helpful. I would greatly appreciate if you could check out my <a href=\"https://www.youtube.com/channel/UCtxed_NljgtAXrQMMdLvhrQ?\">Youtube channel</a>, follow me on <a href=\"https://twitter.com/Shehan_Atuk\">Twitter</a>, <a href=\"https://www.linkedin.com/in/shehan-a-780622126/\">LinkedIn</a>, <a href=\"https://github.com/ShehanAT\">Github</a> and <a href=\"https://www.instagram.com/shehanthewebdev/\">Instagram</a>.</p>","frontmatter":{"title":"Basic Integration Testing For Ruby On Rails Apps Part 1","date":"September 20, 2019","description":"Detailing the basics of integration testing of Ruby On Rails applications."}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/09-20-2019/","previous":{"fields":{"slug":"/09-17-2019/"},"frontmatter":{"title":"Basic Unit Testing of Models in Ruby On Rails App Part 2"}},"next":null}}}