{"componentChunkName":"component---src-templates-blog-post-js","path":"/10-11-2019/","webpackCompilationHash":"","result":{"data":{"site":{"siteMetadata":{"title":"Web Dev Tutorials","author":"Shehan Atuk "}},"markdownRemark":{"id":"377d4cac-e03f-5e75-a5e1-ca0fc2fca9e3","excerpt":"Form submission in Ruby On Rails can be done in one of two ways: locally or remotely. To submit locally means to specify a url determined by predefined routes…","html":"<p>Form submission in Ruby On Rails can be done in one of two ways: locally or remotely. To submit locally means to specify a url determined by predefined routes then submit one request to be received by an action, but to submit remotely means to send two requests: one from the form itself via Rails routing and the other with unobtrusive JavaScript AJAX calls. Today we will cover how to implement remote form submission with JavaScript AJAX calls in Ruby On Rails.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/c82d3bce80b5603b2fa27efe66f755ae/ccc82/img1.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 81.67155425219941%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAQABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAIEAf/EABUBAQEAAAAAAAAAAAAAAAAAAAIB/9oADAMBAAIQAxAAAAHFioKYUi//xAAbEAEBAAIDAQAAAAAAAAAAAAACAQASAxETFP/aAAgBAQABBQJEmGbDTvLGrwSg/R5Z/8QAFREBAQAAAAAAAAAAAAAAAAAAACH/2gAIAQMBAT8BiP/EABURAQEAAAAAAAAAAAAAAAAAAAAh/9oACAECAQE/AVf/xAAfEAABAwMFAAAAAAAAAAAAAAAAAQIRECExEiJhcZH/2gAIAQEABj8CXfjhBL36SksIc3Jpj0//xAAeEAACAQQDAQAAAAAAAAAAAAABEQAhMUGxUcHR4f/aAAgBAQABPyGkhsAPhBnKS4RqZ+h5KwUbWtDkghTikLG3T//aAAwDAQACAAMAAAAQRy//xAAXEQADAQAAAAAAAAAAAAAAAAAAASER/9oACAEDAQE/EFWDuH//xAAWEQEBAQAAAAAAAAAAAAAAAAARARD/2gAIAQIBAT8QqOP/xAAcEAEAAwADAQEAAAAAAAAAAAABABEhMVFxgaH/2gAIAQEAAT8QCxd/1oAa5S9Lcvdv1NEBz0xUapZUcKvWOugUdD75FVijehV6T//Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"JavaScript AJAX joke \"\n        title=\"JavaScript AJAX joke \"\n        src=\"/static/c82d3bce80b5603b2fa27efe66f755ae/c739e/img1.jpg\"\n        srcset=\"/static/c82d3bce80b5603b2fa27efe66f755ae/8ee9c/img1.jpg 148w,\n/static/c82d3bce80b5603b2fa27efe66f755ae/ebbe7/img1.jpg 295w,\n/static/c82d3bce80b5603b2fa27efe66f755ae/c739e/img1.jpg 590w,\n/static/c82d3bce80b5603b2fa27efe66f755ae/ccc82/img1.jpg 682w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p align=\"center\">Figure 1: Some JavaScript Humor</p>\n<h3>Introduction</h3>\n<p>As usual we will be using the Article application made in earlier posts which will hold our form. If you are feeling lost you can generate a scaffold application by running the command:<code class=\"language-text\">rails generate article</code>. This will generate a scaffolded application with an <code class=\"language-text\">article</code> model, some migrations, and appropriate controllers and views so you can build your RESTFUL application with minimal setup time. We will build a login form with form submission handled through unobtrusive JavaScript AJAX calls.  </p>\n<h3>Setting Up</h3>\n<p>These are the files and folder structure we will need:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">|--app\n    |--controllers\n        |-- sessions_controller.rb\n    |--views\n        |-- sessions\n            |-- new.html.erb\n            |-- new.js.erb\n            |-- index.html.erb\n    |--models\n        |-- article.rb\n        |-- session.rb</code></pre></div>\n<p>In the <code class=\"language-text\">sessions_controller.rb</code> file we will need the <code class=\"language-text\">new</code>, <code class=\"language-text\">create</code> and <code class=\"language-text\">index</code> actions:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">def new \n    respond_to do |format|\n        format.html { render &quot;new&quot; }\n        format.js { render &quot;new&quot; }\n    end \nend \n \ndef create \n    if User.authenticate(params[:username], params[:password])\n        redirect_to sessions_path      \n    else     \n        respond_to do |format|\n            format.html { render &quot;new&quot; }\n            format.js { render &quot;new&quot; }\n            format.json { render json: { message: &quot;Invalid Credentials!&quot; } }\n        end     \n    end \nend \n\n\ndef index\nend </code></pre></div>\n<p>If a render call is not used in an action, Rails automatically looks to render a html.erb file corresponding to the action’s name, in this case <code class=\"language-text\">new.html.erb</code> will be rendered upon navigating to <code class=\"language-text\">/sessions/new</code>. </p>\n<p>Next lets setup up our view files: in <code class=\"language-text\">sessions/new.html.erb</code> add this form:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">&lt;%= form_with url:&quot;/sessions&quot; do |form|%&gt;\n    &lt;div id=&quot;alert_message&quot;&gt; \n    &lt;/div&gt;\n    &lt;%= form.label(:username, &quot;Username:&quot;) %&gt;\n    &lt;%= form.text_field(:username)  %&gt;\n    &lt;%= form.label(:password, &quot;Password:&quot;) %&gt;\n    &lt;%= form.text_field(:password)  %&gt;\n    \n    &lt;%= form.submit &quot;Login&quot;, data: { &quot;disable-with&quot;: &quot;Loading...&quot; } %&gt;\n&lt;% end %&gt;</code></pre></div>\n<p>and for the <code class=\"language-text\">sessions/index.html.erb</code> file, add this:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">&lt;h1&gt;Welcome&lt;/h1&gt;</code></pre></div>\n<p>The <code class=\"language-text\">index.html.erb</code> file is rendered upon a successful login attempt. </p>\n<p>Note the <code class=\"language-text\">remote: true</code> option specified in the <code class=\"language-text\">form_with</code> helper of <code class=\"language-text\">new.html.erb</code>. This serves to tell Rails that we will handle the form submission remotely using JavaScript AJAX calls. Although Rails assumes remote form submission by default it is best to explicitly specify the method of submission to improve readability and maintenance.  </p>\n<p>Now comes the part where we define the AJAX call in the <code class=\"language-text\">new.js.erb</code> file:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$.ajax({\n    url: &quot;/sessions&quot;,\n    method: &quot;post&quot;,\n    data: {\n    },\n    dataType: &quot;json&quot;,\n    success: function(data){\n        $(&quot;#alert_message&quot;).text(data.message);\n    }\n});</code></pre></div>\n<p>This is the AJAX call that will send the POST request to the <code class=\"language-text\">create</code> action in the sessions controller. If the authentication is successful(we will leave out the implementation of User.authenticate for now) the browser redirects to the <code class=\"language-text\">index</code> action, if not the <code class=\"language-text\">new.html.erb</code> is re-rendered and the AJAX callback function is executed. This function will display the message “Invalid Credentials!” in the <code class=\"language-text\">div#alert_message</code> element to notify the user that authentication has failed. </p>\n<p>Note: this implementation assumes you have the <code class=\"language-text\">jquery-rails</code> gem already installed, if not go their <a href=\"https://github.com/rails/jquery-rails\">github page</a> to install it. </p>\n<p>To test this form navigate to <code class=\"language-text\">/sessions/new</code> and enter the credentials of a registered user and the browser should redirect to <code class=\"language-text\">/sessions</code>. Enter some invalid credentials and you should see the message “Invalid credentials” rendered in the form, which was done through the AJAX callback function. </p>\n<p>So as you see JavaScript AJAX calls are very useful for form submissions and validations. Another plus of using AJAX calls are that browser does not have to refresh in order to submit the form, which gives a smoother and faster experience for end-users. </p>\n<h3>Closing Notes</h3>\n<p>Although this is only a minor implementation of using JavaScript AJAX calls for form submissions I hope this encourages you to look at and implement more advanced examples which will surely improve the applications we build using Ruby On Rails, whether that be through making the application more RESTFUL or creating a smoother end user experience.</p>\n<p>Well that’s all for today, I hope you found this review helpful. I would greatly appreciate if you could check out my <a href=\"https://www.youtube.com/channel/UCtxed_NljgtAXrQMMdLvhrQ?\">Youtube channel</a>, follow me on <a href=\"https://twitter.com/Shehan_Atuk\">Twitter</a>, <a href=\"https://www.linkedin.com/in/shehan-a-780622126/\">LinkedIn</a>, <a href=\"https://github.com/ShehanAT\">Github</a> and <a href=\"https://www.instagram.com/shehanthewebdev/\">Instagram</a>.</p>","frontmatter":{"title":"JavaScript AJAX Form Submission in Ruby On Rails","date":"October 11, 2019","description":"How to submit forms using AJAX in Ruby On Rails"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/10-11-2019/","previous":{"fields":{"slug":"/10-08-2019/"},"frontmatter":{"title":"Commands And Directives of Assembly Programming Language"}},"next":null}}}