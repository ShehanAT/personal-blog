{"componentChunkName":"component---src-templates-blog-post-js","path":"/03-20-2021/","result":{"data":{"site":{"siteMetadata":{"title":"Software Development Tutorials","author":"Shehan Atuk "}},"markdownRemark":{"id":"03a57195-d95c-5753-bed0-9af84363122e","excerpt":"Tetris is a tile-matching arcade style video game which is widely held as one of the greatest early video games ever created. It’s simplicity of rules and…","html":"<p>Tetris is a tile-matching arcade style video game which is widely held as one of the greatest early video games ever created. It’s simplicity of rules and positive benefits on the human brain make it a great video to play. </p>\n<p>So let’s build Tetris using Python, with the help of the Pygame library! This post is part 1 in a series of posts designed to help you make your own Tetris game in Python. </p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 492px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/ae062f24f5d409f5f3c76964485837c4/5c6e9/TetrisGame.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 133.1081081081081%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAbCAYAAAB836/YAAAACXBIWXMAABJ0AAASdAHeZh94AAAEVUlEQVRIx5WV+29TZRjH91cYfiDRRIiJiUAccTA0wJANDJOLRElECCCKA0VJ5PIjBIwSnHFguI0wEWSibNnUjDGGgWWEW7eVXnbrZb2dy9pTunW0W7vu43lP6dy6C/g0J+/peU4/7/d53ud5muNzNeL3uejp6UFRVXxeD2pvEGEjIyOTrqlUikQiYdwnk0ljHRoaIhaLkZNMxAyneCCcmRcyJiBTXdmbiSuHLBNgoVbV1SaTw+PhTz/ZloEKy8neUaiVJAlN0xiMx+nvixDt7zPCRPD1a3h4mORwcoK6cQozTvFyJPLYAPp8XiovlnP+TBnt7VbsSicWyYakSoSCodE8jlOYDRQvybKsw3yGUoejm8s/n+VURSm5rat4xbqch55WNCXE4NDgs4HiUET+AoGAAQxIAfweH/YeO4vuFPNyQx4P3a2EVe35gYqi/AfUV1FObpeDz9YWsLkwD6u5lZCekqH/A/QH/KNAWf/u7uxiT2EhzXX1ul810vJcOZxMoQC2d9vYta4QS1sLwZBm+CYFZpdNBuiVfEb+lIBCp+RglW0rufXLaHG2EZR7kWRpeoWjpjfKw14zG2y78Pq9qAEVS8BOnnkN1b56XZlsqJOVKUIWnSFONRTWiEWe4EvI5FqLWdi2FkVWiCiP6VIdLLCupdiyFYvHhuqXp1Y4MDBAR0cHHo9HB8gMJROc66lktnkpK2ybWG/dSdk/Ncw2LeOllkVYg130RWNphbqYZ4es+yKyxt4/9zHLUsie2rN893sNV511zDMV8fmWldxcvRnZ4TQ6kTH5N4Bi5Ah1TqeTUChELP6Ei2ePU7JsCcXb3+C95i9o73LRp6fjpqeZQ2VlWGrrsJd8TdTlSWsQfZ4BxvUBIJLs9XoJ68WaGElhqq+j/NUFbFjyGjNa5vOB9RNu791H2K1w4dY9zt+6y/FjJ+mVlNH5OGXIYhpqlnb+mreYbcvzqbJWUbZjBddzF3Nn515Kbtymoe0Rdj2iJ5PlMFODYhchXeylmq00Fq2n9pcLnNuxm+a5RTQtKOTv15eyvtHE/h6Nw90qSjwNTE3aKU9l9wZVTm7ZyqMPS3Dqk+bTJfncP3GatuUb6ay4wsrWg8xq/YoX7m3HHvWlR97IJCGnUunp7Onq5P2ZMziYt5Bvt2xkT/E7dOiTZtulNXxk/5LZjgJeNOVS6v2JaCI6ddlkEtsrByjdt5sz5Wco3n+AHW/m88fNBk7Iv1HqLufQN+uYc7+Ao98fIOoPTTzl7OGghUPUVV/GOZjkbXMXG348wZHLNTTdNuM+fJoHb61j9cdzWDF3Jl57x7josoDpXcJakIpTP3D9xjWOdTh51+6m6q6Jo79epenIMRrzi7hy4CCb5s/DZbNOB0wrjMdjPLjXhPnBHR7391MtqYT7o5i6XUT0mvVUVhPXn1+rvISmt+q0rTfWMZ2NTPObCQozNWnUpX4/PLZOxb3+r2g8f7pmQ/8FolSQMurwWx4AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Screenshot of the Tetris game we will build\"\n        title=\"Screenshot of the Tetris game we will build\"\n        src=\"/static/ae062f24f5d409f5f3c76964485837c4/5c6e9/TetrisGame.png\"\n        srcset=\"/static/ae062f24f5d409f5f3c76964485837c4/12f09/TetrisGame.png 148w,\n/static/ae062f24f5d409f5f3c76964485837c4/e4a3f/TetrisGame.png 295w,\n/static/ae062f24f5d409f5f3c76964485837c4/5c6e9/TetrisGame.png 492w\"\n        sizes=\"(max-width: 492px) 100vw, 492px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p align=\"center\">Figure 1: Screenshot of the Tetris game we will build</p>\n<h3>What You Will Need</h3>\n<p>Before starting to code the Tetris game we must ensure that you meet these requirements before building anything:</p>\n<ul>\n<li>Python 3(preferably 3.8 or above) installed</li>\n<li>Pygame 2(preferably 2.0.1 or above) installed </li>\n<li>Knowledge of the Tetris game rules(<a href=\"https://www.interaction-design.org/literature/article/a-game-explained-an-example-of-a-single-game-and-how-it-meets-the-rules-of-fun#:~:text=as%20you%20can.-,Rules,blank%20space%20in%20a%20line.\">see here</a>)\nIf you want to know how to install Pygame see installation instructions below. </li>\n</ul>\n<h3>How to install Python 3</h3>\n<ol>\n<li>Open a terminal instance in your IDE’s workspace </li>\n<li>Use the <code class=\"language-text\">pip</code> tool to install pygame using this command: <code class=\"language-text\">python3 -m pip install -U pygame --user</code></li>\n<li>Done :grinning</li>\n</ol>\n<h3>1. Setup environment and game file</h3>\n<p>First go to your IDE and create a folder for the Tetris game you are about to build. Then inside that folder, create a file called <code class=\"language-text\">__main__.py</code>. This file will hold all the code needed to build this game. </p>\n<p>Let’s start by importing the required libraries and defining some global variables. </p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">import pygame, sys, os, random \nfrom pygame.locals import *  \n\n\ncolors = [\n    (37, 235, 11), \n    (160, 154, 143), \n    (139, 176, 186), \n    (57, 217, 227), \n    (82, 30, 24),\n    (13, 216, 46),\n    (198, 39, 57)\n]\n\nWHITE = (255, 255, 255)\nGREY = (128, 128, 128)\nBLACK = (0, 0, 0)\n\nlevel = 1\nlines_to_clear = 1</code></pre></div>\n<p>We need the <code class=\"language-text\">pygame</code> library and the <code class=\"language-text\">pygame.locals</code> library so we’ll import those. The <code class=\"language-text\">colors</code> array contains all the colors that any of the figures in the Tetris game will contain. The colors are stored in RGB format. The <code class=\"language-text\">WHITE, GREY, BLACK</code> colors will be used to color various sections of the game screen such as background, grid and text color. Now, the <code class=\"language-text\">level</code> global variable keeps track of the current level of the game, starting from 1. And lastly, the <code class=\"language-text\">lines_to_clear</code> variable keeps track of how many lines to clear in order to move to the next level. Ex: if you’re in level 2, you’ll have to clear 2 lines in order to play level 3. </p>\n<h3>2. Setup classes and main()</h3>\n<p>For this Tetris implementation we’ll need two classes: Figure and Tetris. Figure is the class that all objects that fall from the top of the screen are instances of, also known as the Model in MVC Pattern terminology. The Tetris class is the Controller in MVC terminology because it holds the state of the game, controls game flow and separates the view from the model(which is the Figure class in this case). </p>\n<p>Now let’s define the Figure class first:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">class Figure:\n    &#39;&#39;&#39;\n    Figure class is used to create the blocks that will fall down from the top of the screen \n    |0 |1 |2 |3 |\n    |4 |5 |6 |7 |\n    |8 |9 |10|11|\n    |12|13|14|15|\n    This is a visual of the 4x4 grid system used \n    to rotation the various shapes in Tetris game.\n\n    Tetromino: is a geometric shape composed of 4 squares \n    &#39;&#39;&#39;\n    figures = [\n        [[4, 5, 6, 7], [1, 5, 9, 13]], # for straight line\n        [[1, 4, 5, 6], [1, 4, 5, 9], [4, 5, 6, 9], [1, 5, 6, 9]], # for pyramid tetromino\n        [[1, 2, 5, 9], [0, 4, 5, 6], [1, 5, 8, 9], [4, 5, 6, 10]], # for left side L-shaped tetromino \n        [[1, 2, 6, 10], [3, 5, 6, 7], [2, 6, 10, 11], [5, 6, 7, 9]], # for right side L-shaped tetromino \n        [[5, 6, 9, 10]], # for square shape \n        [[1, 2, 4, 5], [0, 4, 5, 9], [5, 6, 8, 9], [1, 5, 6, 10]], # for left side zig-zag shaped tetromino \n        [[1, 2, 6, 7], [3, 6, 7, 10], [5, 6, 10, 11], [2, 5, 6, 9]] # for right side zig-zag shaped tetromino \n    ]\n\n    def __init__(self, x, y):\n        self.x = x \n        self.y = y \n        self.type = random.randint(0, (len(self.figures) - 1))\n        self.color = random.randint(1, (len(colors) - 1))\n        self.rotation = 0 \n\n    # gets the specific shape and color of currently falling object \n    def get_image(self):\n        return self.figures[self.type][self.rotation]\n\n    # increments to the next rotation of any type of figure\n    def rotate(self):\n        self.rotation = (self.rotation + 1) % (len(self.figures[self.type])) </code></pre></div>\n<p>I will explain each of the attributes and methods in Figure class below:</p>\n<ul>\n<li><code class=\"language-text\">figures</code> array: This is a multidimensional array used to store all the figure shapes along with their respective rotations. The way this works is that all figures all stored in a 4x4 matrix like this:</li>\n</ul>\n<div class=\"tetris_4x4_grid_shape_section\">\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 216px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/04362c18da8067bb9fe195f03f330efa/7d4ec/4x4GridShape1S.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAC2ElEQVQ4y11T207cMBDdfwAKCbC0KgieeGhpP5z3qo+oBRZV7IW9iWyum6zjxLETZyOS9CSGqGVkjXw0czzj43Hv4eHB933Pc32fjMd38/mp7++6rub7e9Pp6dPT7WZDXddZr9eLxWI8HgdBgHzHcVzX7XmeV9e149jwUWRJeZFlehB8qusPjF1wbq3XmzyXiAohGGNFUaxWK8CqqnqWZWFHaQhPiCHEeZoeUHoCMqXncbyilEmZIQompTTPc5QFLMvytXJZvrSVTSEuQKuqo7reZ+ycMbMtUqrKURSpmnVrvdFoGsdpGFLG5HI5Ms2zON4LQx3eMM6en0dJIsMQLGGa7nK5RP3wzXrz+eV2+9X3v6fpN9u+DAKdcw3kPNccR/O8S0KuouhKyi++f2Xb95xnlG7SNEUjPcfZqeu95fLzdqvF8Y6UuPDRaoU7o/gB57tRpGXZfl3vcg44ISRcLB5fBbNtva6Pi6Jf131CDpME8LAoDuGjSKcUm/7LC6JHSfKRkD+gFUVetgbBDhAoS73N1oRoNlWlwTOmY7UQR+hCnETRY6dfI9jTEwiHnJ9k2bFhaK6LpCPkAVqWhpVlfc6xdNftG8aNEAXnCeccyoH8M8/ng8G1799b1i/Pu4vj4f39tef9dpxbLNu+mU5/ZNkMe8NYCpGORiPIDn7PdddowDBsKXPGEsQAZ7Nnzhs9ORdpKoMg/PedMVeEkKZt2za7ISEkSJK4FbJqx45EEVHDBIeQ4lStNYJhvt/CyKY4vpsh1loHEULCfxM2n88xrkjKsgz94MdgkyQJvNualFJBhJCgIC7cDAluH8cxLoOhgQymaQKq8HNrOBcQHiEkIKo6asZTtU1bU0cA4veignoPQORst1sUV23jL3WCNT8Zp85ms81mg2ZwpcFggIxO3uFwCBrIioNmJ5NJQ+4+p6qPap0kcWsdROi9YO/ISm0FO7KCndqAiv8XdKIWRbT37PQAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Shape #1\"\n        title=\"Shape #1\"\n        src=\"/static/04362c18da8067bb9fe195f03f330efa/7d4ec/4x4GridShape1S.png\"\n        srcset=\"/static/04362c18da8067bb9fe195f03f330efa/12f09/4x4GridShape1S.png 148w,\n/static/04362c18da8067bb9fe195f03f330efa/7d4ec/4x4GridShape1S.png 216w\"\n        sizes=\"(max-width: 216px) 100vw, 216px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p align=\"center\">Shape #1</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 216px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/542de8fd74d4dbae1431f38ad8430622/7d4ec/4x4GridShape2S.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAC3klEQVQ4y2VTXW/TMBTtb4B9tV3LJDY6XkBowA/njQceeJrEWCdB23XtsqX5bNIkjmPHSbsl5tQeQYB1Zfno3pN7fXzSurq6CoLA970giCaT7/P5cRDseF47CHZvbo6n04vVKvE8d7lc3t7eTiaTMAxR77qu53kt3/ellK7rYCfELopTIQ7C8EjKPUpPGbOXy1VZFshyzimlm81msVgA1nXdsm0bpySJsUeRyfkAZEJegJwkgzRdJAktCoEsmEmSlGWJtoBVVT11rqpH1dni/BS0uj6Ucp/SAaWWalLpzoQQ3VOq1RqPx2maxnFMKTOMH5Z1kqa7cdzBbpon9/djSosoAotZlmcYC0p5HBOUI1rz+Xy9XkOCPC8cZxqGrxjbi+NuWbZdt+37b6LoPSFnRXEWBO8c5y1jH5PkQ56fcX7WgpIY4O7u53pdpqlbFANC9m27LyWaHzC2g12IPSl3cWbsWRz37+5eSvm8rndbjrPV+eFhrQXLMtx5f7PBnbuEdJKkK2X/8bEnZS/LDqNoCzebflX1EP8L9hrkukZRl9IOAoe63u6cdwhpNxDRmk6nkJGxTIjSNMeed8r5AedHQvRsu40Qos8Yout5HdNsc95VsEepIuPphsMhfGPbC98fpuno8vKT739z3QuE45zf3HwRYoazaZ5zPh2PPxvGV8auIZiHgU3TLIoCNuA8B5zN7hnL1UQcrxCGsXrnnJAUB9v28Xjbd9aCwS5KsCjLUuWCWtkO7xv9zlZIRVGoshWiqh6eOmsy3IdujYeoWg1ECgV/OQwmwZ1RJISAz3FzHLIM+glPLVxHQyWKrSHDfTh/sifsl+e5YRiWZQHq9L1a+C4gdqRQgKyeCI5+GjtRS38CEH8vOoCvx0YNLIzmemxYA+r8EQxfnc1mq9UKw+BKeDlUNL/RaDQCDWTNwbDX19dbcvNz6v7o1kiSqtVApP4V7B+yVlvDhqxhozag5v8CZBwWW/cgzz0AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Shape #2\"\n        title=\"Shape #2\"\n        src=\"/static/542de8fd74d4dbae1431f38ad8430622/7d4ec/4x4GridShape2S.png\"\n        srcset=\"/static/542de8fd74d4dbae1431f38ad8430622/12f09/4x4GridShape2S.png 148w,\n/static/542de8fd74d4dbae1431f38ad8430622/7d4ec/4x4GridShape2S.png 216w\"\n        sizes=\"(max-width: 216px) 100vw, 216px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p align=\"center\">Shape #2</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 216px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/f33dcc3f8449a2e0dd583fbe79fdf142/7d4ec/4x4GridShape3S.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAC+UlEQVQ4y11TW2/TMBjtb4Chde3aog3BBkIabOIN8cIf5hfwANKe2mmjt3Vrk+biLM3Njl0naZuY06QrElZkfSf+bj4+X+3m5sZ1XcdxsA+Hw4eHB9ddEEIA7+/vx+Ox53mAT09Pj4+PcFgsFjiybRs/awhTSgFgj6IoSVIpQ88zABmjnHOEpWkKKIRgjK1Wq/l8DlgURc00TVhhGGL3fV+IpZRI4lQ/KaXYkyQpczHYSFRVyvN8VxlWVRnpq6yVN9Ye4ggOe4hVGwwGSB8EIfym06lhEEp5EESUCl03Nc1kTPg+RVocwQFuwfOqgaEsy0DBcplY1mSx+Mr5pyC4StNL275wnAvfv4yiyyT57LpXltXlXIaht1wu0UiNkO0FZrM/WZZSaiXJaRS9MM0jpV5ResD5AaX1JDlUCnad8xF6hPOOMMuyYK3XWUmYHsfvlWqs1x2lWlHUDMMmjM2mrdRxHL/2/Vu4rVZpXq49YZuSMEOIc6UOiwIxTcYajKGFZgmPhEC6u7JmviMMMkD3nMdSpro+IORMiLoQr6VsoXnTrEtZLxuuE3Ks67+FkJx7nAd4uG0wnq7X60E3pjl3nB6l/W73h+N0bfunbZ8Q0p5MTqVs2HZd1z8K8WU0+q5p3zi/BGEEDei6DiXgGSASwMlkxnkmhM352yTpeN4bNI+OougARFrWeRieKPVyR1glEigsjmlJZF4qbBZFZ6Agz7cUxHHD97f8gYKiOM7z1q5yFQz1PSssLxVmMPbumb+GEEdhWIdRFA3s+LYiwZ3RsJQSOsfNYcQx4IqQMSEfkgSP1Jay47pt02zhFoCct4Xo7OQJ0UI0pTwNwDiOMU+aNtW0a8b6cTxkbGAY19PpL9AJG18Q3O7aDstVpQDEGII/zkU1GIT4WbZBRxgzQMcBOVtjRxgKTiYTzD3uDLrwchBPOUYY1aLfvwvDQMql73twHgz6o9FwG7wfzqo+ut0PHS3XHuKoGvt/I/lfcMV2BffBFcRRFQxYxf8F4GUWgA+L9rwAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Shape #3\"\n        title=\"Shape #3\"\n        src=\"/static/f33dcc3f8449a2e0dd583fbe79fdf142/7d4ec/4x4GridShape3S.png\"\n        srcset=\"/static/f33dcc3f8449a2e0dd583fbe79fdf142/12f09/4x4GridShape3S.png 148w,\n/static/f33dcc3f8449a2e0dd583fbe79fdf142/7d4ec/4x4GridShape3S.png 216w\"\n        sizes=\"(max-width: 216px) 100vw, 216px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p align=\"center\">Shape #3</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 216px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a6b13d1e4f556b8b4d90503daa14d91a/7d4ec/4x4GridShape4S.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAC2UlEQVQ4y11TaVPbMBDNb+gAIQECQ6fHtNMZWvjan9+DD4QpJQc5iPEhx0ksS5Ys2bncZyuYtjsazT5rz+fd2u3tbRAEvu/j7na7w+EwCGaEEMCHh4d+vz+fzwGn0+loNILBbDbDk+d5+FiDW57nALijKNI6VYrO5zYg50wIAbc0TQGllJzz5XL59PQEuN1ua47jQKOU4l4sFlImSiGIbz4yxnBrrctYHDoCmUybzWaXGZrJjPAmqrGGVBBPMKggpNbpdBA+DCnsxuOxbRPGRBhGjEnLciYTh3O5WDCExRMMYBY+Sw0MZVkGCpJEu+5gNvsqxOcwvErTS8+78P2LMLyMokutvwTBleveCKEonSdJgkJqhBQNPD7+zrKUMVfr11H0ynUbeb7P2J4Qe5wfan2Q59APheihRhjvCHNdF9pqlZWEWXH8Ic8bq1Urz0+i6AgHynoNeBzHZ4vFL5gtl+mmlIqwdUmYLeX7PK9vt8d5fsR5AwfKdosQDSkR7q7MudkRhjFA9ULESqWW1SHkrZT7UtaTpOE4hzhKodoGaibk2LK+S7mEcRwLMFc449e12zdBMHecvu+/Yeyw3f40nZ553oHn1QlpDYcthPA8OP+QMuv17ixrKERBGEEBljXROuPck/IdKhyNLpLkXIg6EmqNVs/+LtvzJowFRdmGMNNzSZjpuYlWKW1GUaFsNui5GcctQxh6BtUFYSazcaa0IqywfiasWRFG6b+EYUjQM7pXKkPPQfBRqSMkUeqUkBMcrU9L2AqCc8e51noTx8XCFENixhNDi6EZj0e2fc3YfRx3hehOJt9wOC8g5x3b/jkeDxgzI18M6a5sWooJATidYpMyROc8BiRkkWVrhV2lxWJgNLB/L4TZtj0YPGDv8cvREv6c7xPoUYRV3d7f31EaKpUYHxTb6/UK52o5TX40Uy0dK6WCeDJr/7KS/zmbfTawcjYQT8YZ0Pj/AStVFk8kj8PNAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Shape #4\"\n        title=\"Shape #4\"\n        src=\"/static/a6b13d1e4f556b8b4d90503daa14d91a/7d4ec/4x4GridShape4S.png\"\n        srcset=\"/static/a6b13d1e4f556b8b4d90503daa14d91a/12f09/4x4GridShape4S.png 148w,\n/static/a6b13d1e4f556b8b4d90503daa14d91a/7d4ec/4x4GridShape4S.png 216w\"\n        sizes=\"(max-width: 216px) 100vw, 216px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p align=\"center\">Shape #4</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 216px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/0c6a8e4e799122a7bdea5e718141836c/7d4ec/4x4GridShape5S.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAA7EAAAOxAGVKw4bAAACzUlEQVQ4y42UXW/aMBSG+RErUD4qVepor/b/b3Y1adM6jXZ0hLR8BRI7CeTDjp04AUL2JmnZWmnTfGEd23l9znn8QuPu7s51Xdu2MWuaNp1OXXdDKXVd7/Hxm65fbTbvKD13nNZs1tW0j5tNiM8JIfimAVlRFFhgDsNQqTRJgu12hSXnKyFutttBll0URVvKC87Hu12xWi1xejweG6ZpIgqCALPneVLGSYJLaLW5ZOyascs07RfFOef9IBil6ZEQC6d5nj9nRlRnllJWt+ZV5jXn10XRPB57EEvZD8PR6RSjMR6PGWO+H3DO5/P5er2ulj5jwjBGy+UV503P64Rha73uzuefOE983/Or0QChLMtcl8SxtCxrs9kIEfm+k6YHQia2PfD9szDsKNV23Z5l3QqhgmAb42spG5SWqBaLn1kWI6dSGWMWIT+wyRiAXXN+rlRZthB9IXTUuFg8PANDNkT7/a4GFkUR9vf7tEJghCF6bh0OpTiK+p5XXrrbpXk1/gdY66/AdF2HQAiRJIlhGHh6WQ4Rx5lpjk3zfZKcCdERok1pzzA+S7kDlCgSAFyK0zQdDodwGN6cUptzdn9/6zguITohV7bdmc36SdImBOIvUmaTycgwpkKUwEo/IKdSCpfVZc/nWpLEQhAhBmna9byLP8smBOZxy7JrYHXPL8Ceu4LDKmDNPO++ALuvT4G6BFZnrsUw6b+BwZ6vgMEk6BkFAxh6RucIogjLHaU6pQOlmlHURc8wiWl+VSqPIgbApUlqe+KRYJqTPSEG/uXyR2XPsyhqw6S1PRmLQRTJSnvWZQfVqK/A0nFspfAkVl2249zs95dx3AuC0lu2TUHnNzAkfHp62m63KAYwhsPvto2YhuEAYk37wNhVHAN72fN4/DCZTEpx/TdwAoZmTkjgbfyeK2Cg3Ya33wJ7I65p5/mhEq9rcZ6/oo1TVIfgF1AeFSce5ikZAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Shape #5\"\n        title=\"Shape #5\"\n        src=\"/static/0c6a8e4e799122a7bdea5e718141836c/7d4ec/4x4GridShape5S.png\"\n        srcset=\"/static/0c6a8e4e799122a7bdea5e718141836c/12f09/4x4GridShape5S.png 148w,\n/static/0c6a8e4e799122a7bdea5e718141836c/7d4ec/4x4GridShape5S.png 216w\"\n        sizes=\"(max-width: 216px) 100vw, 216px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p align=\"center\">Shape #5</p>\n</div>\nThen, each list inside ```figures``` contains all the specific rotation coordinates for that particular shape. For example Shape #1's second rotation looks like this: \n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 216px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/38dbe772418d0a735ccbc840ac873f47/7d4ec/4x4GridShape1SR2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAC5UlEQVQ4y41Ua2/TQBDMf4DSpg0FqY9UQiAkBD+cP8A3JARKVSAvXMeu7bv4Evteds5OUucY2yUCJCRW0ek29tzOzs65c319zRibzyljyWj0xXHOGXtMaZexg+n0fDL5vFhwSkkcx7e3t6PRaLFY4H1CCKW0M5/PrbWERFiFCIuib8zT5fLC2gOlrrQOkyRerw2e5nmulNpsNnd3d0h3u10nDEPsOE+xJomf55fG9IQ4s/YJ530p77QWZVmDgeScl2WJskirqnqoXFX3TeUgz68A2+161h4q1VcqaIpUbWUhRFvTNtEZDqdSrtKUK1W47jAILqQ8SNMuVt8/97wbpUySJIAFQeC6Luqnv6LjOK/K8g1j74x5G0WvFotulh2naa8snxByMZ9P03QhRFoUJXSKoijLNOfJarUCkQ6lj6CN552t18dSPiqKIymfE3IJ8lL2s4woxYpCg2RWR56m8Wz2/UGwKDq29ul2e2rtaZKcaN219ni7rXsWoi+Eh/fu77dYtdbgjw0Er5qAYEfW9qoKR5wI0c3zGvy/gk0mAJxk2TOM1/e7lB4Bn+eHq9VBGF6G4dCYDfoEY7jC9zHLHHutMygH8IeydAaD94xdh+EHSs+U6t7cvGSsR8g5IZM4jlz3qzEGpmrB4/E333fQPwSLQcD34a2tUqSZc3c2e23MaZZdQjA4JEmC32kT4kvJatpRFOxNkiQzrQE+3O1OsHJ+JYTfmul3wXZN1IKhkz2Y89Zhh/8SDPb8QzDHcWBXdG/MOgwnjL0wBgODfj1KX1A6KYqN1hI9wyS4CAWGrmv9apMMh0MpJZqBaVz3Ngg+Sfld61GWjTzvo+fNVB0av9aeeLn5pzbpA23eRHsE0jjmRbHG8cAgRcnttlytTEsbd6ltHoLVNxmn/vgxXS6XmCI6HAwG+Dxg38o7nQ6UWgLcYkB2PB7X4P3lbOuj2l4S2cQ+xaO/BfsLDBn26R7cpnu1kbb4n429F3Bjb2ERAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Shape #1&#39;s second rotation\"\n        title=\"Shape #1&#39;s second rotation\"\n        src=\"/static/38dbe772418d0a735ccbc840ac873f47/7d4ec/4x4GridShape1SR2.png\"\n        srcset=\"/static/38dbe772418d0a735ccbc840ac873f47/12f09/4x4GridShape1SR2.png 148w,\n/static/38dbe772418d0a735ccbc840ac873f47/7d4ec/4x4GridShape1SR2.png 216w\"\n        sizes=\"(max-width: 216px) 100vw, 216px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<ul>\n<li><code class=\"language-text\">def __init__(self, x, y)</code>: in this Figure constructor we get the x and y starting coordinates for each Figure instance from the constructor parameters. The <code class=\"language-text\">self.type</code> attribute assigns a shape from the <code class=\"language-text\">figures</code> array to each Figure instance, which will be determined randomly. The <code class=\"language-text\">self.color</code> attribute randomly assigns a color from the <code class=\"language-text\">colors</code> global array to each Figure instance. Finally, the <code class=\"language-text\">rotation</code> attribute assigns the first rotation of each shape and keeps track of the rotations of each shape, to every Figure. </li>\n<li><code class=\"language-text\">def get_image(self)</code>: this method randomly determines a shape type and color combination for each Figure instantiation and returns that array of specific coordinates. </li>\n<li><code class=\"language-text\">def rotate(self)</code>: this method is used for incrementing to the next rotation of each shape. The logic inside ensures that no array indexing errors occur and that after the final rotation, the first rotation is used again, effectively looping the rotations of each shape.</li>\n</ul>\n<p>Now let’s build the Tetris class:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">class Tetris:\n    lines_cleared = 0\n    score = 0 \n    state = &quot;start&quot;\n    field = [] \n    HEIGHT = 0\n    WIDTH = 0 \n    startX = 100 \n    startY = 50\n    zoom = 20 \n    figure = None \n\n    def __init__(self, height, width):\n        self.field = []  \n        self.figure = None \n        self.height = height \n        self.width = width\n        for i in range(height):\n            new_line = []\n            for j in range(width):\n                new_line.append(0)\n            self.field.append(new_line)     </code></pre></div>\n<p>Here is the explanation for each attribute and the constructor in Tetris:</p>\n<ul>\n<li><code class=\"language-text\">lines_cleared</code>: This variable keeps track of how many lines were cleared when a Figure fixes on to the bottom of the game screen. It is used to keep track of when to level up</li>\n<li><code class=\"language-text\">score</code>: keeps track of the score in-game </li>\n<li><code class=\"language-text\">state</code>: keeps track of the state of the game, starting with <code class=\"language-text\">start</code> then changes to <code class=\"language-text\">gameover</code> if the game over conditions are met(which are if the shapes touch the top of the game screen)</li>\n<li><code class=\"language-text\">field</code>: this is a multi-dimensional array which keeps track of each tile in the game screen. The default size is 10x20, so the total number of tiles in the game screen is 200. Each tile is given value of <code class=\"language-text\">0</code> to denote an empty tile and as the game progresses the tiles are given a non-zero value once a Figure lands on that tile. </li>\n<li><code class=\"language-text\">startX</code>: this is the starting x coordinate from where each figure will fall from. Note: the value is based on the window screen, not the game screen(which is smaller in size)</li>\n<li><code class=\"language-text\">startY</code>: this is the starting y coordination from where each figure will fall from. Also based on window size</li>\n<li><code class=\"language-text\">zoom</code>: this attribute helps in filling each game tile with color when a Figure is occupying it or falling through that tile. </li>\n<li><code class=\"language-text\">figure</code>: this is what holds the current Figure instance, so that the Figure instance can be controlled by the Tetris instance</li>\n<li><code class=\"language-text\">def __init__(self, height, width)</code>: constructor for Tetris, assigns the passed height and width to the Tetris instance. Since the Tetris class will be instantiated more than once upon leveling up in-game, the <code class=\"language-text\">field = []</code> and <code class=\"language-text\">figure = None</code> lines erases the data from the previous level. Finally, the constructor fills the <code class=\"language-text\">field</code> multi-dimensional array with <code class=\"language-text\">0</code> values as a starting point for the game</li>\n</ul>\n<p>Now let’s add the methods for the Tetris class:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">    def create_figure(self):\n            self.figure = Figure(3, 0)\n \n    def intersects(self):\n        intersects = False \n        for i in range(4):\n            for j in range(4):\n                if (i * 4) + j in self.figure.get_image():\n                    if (i + self.figure.y) &gt; (self.height - 1) or \\\n                        (j + self.figure.x) &gt; (self.width - 1) or \\\n                        (j + self.figure.x) &lt; 0 or \\\n                        self.field[i + self.figure.y][j + self.figure.x] &gt; 0:\n                        intersects = True \n        return intersects \n\n    def freeze_figure(self):\n        for i in range(4):\n            for j in range(4):\n                if i * 4 + j in self.figure.get_image():\n                    self.field[i + self.figure.y][j + self.figure.x] = self.figure.color        \n        self.break_lines()\n        self.create_figure()\n        if self.intersects():\n            self.state = &quot;gameover&quot;      \n\n    def break_lines(self):\n        lines = 0 \n        for i in range(1, self.height):\n            zeros = 0 \n            for j in range(0, self.width):\n                if self.field[i][j] == 0:\n                    zeros += 1\n                \n            if zeros == 0:\n                lines += 1\n                for i1 in range(i, 1, -1):\n                    for j in range(self.width):\n                        self.field[i1][j] = self.field[i1 - 1][j]        \n        self.score += lines ** 2\n        self.lines_cleared += lines \n        self.check_level_up() \n    \n    def check_level_up(self):\n        global level \n        global lines_to_clear \n        if self.lines_cleared &gt;= level:\n            level += 1\n            lines_to_clear = level \n            self.lines_cleared = 0 \n            return True \n        else:\n            lines_to_clear = level - self.lines_cleared \n            return False \n\n    def go_space(self):\n        while not self.intersects():\n            self.figure.y += 1\n        self.figure.y -= 1 \n        self.freeze_figure()\n\n    def go_down(self):\n        self.figure.y += 1\n        if self.intersects():\n            self.figure.y -= 1\n            self.freeze_figure()\n\n    def go_sideways(self, dx):\n        previous_x = self.figure.x \n        self.figure.x += dx  \n        if self.intersects():\n            self.figure.x = previous_x  \n\n    def rotate(self):\n        previous_rotation = self.figure.rotation\n        self.figure.rotate()\n        if self.intersects():\n            self.figure.rotation = previous_rotation </code></pre></div>\n<p>Explanation:</p>\n<ul>\n<li><code class=\"language-text\">def create_figure(self)</code>: This method creates a new Figure instance and assigns it to the figure attribute in Tetris</li>\n<li><code class=\"language-text\">def intersects(self)</code>: This method checks if the currently falling Figure is colliding with any fixed Figures at the bottom of the game screen and/or if the falling Figure is trying to go out of bounds in the x axis. It returns True if either of these conditions occurs and False if neither occurs</li>\n<li><code class=\"language-text\">def freeze_figure(self)</code>: This method is used for freezing the falling Figure to the game screen if it is found to be colliding with the game screen bottom or any of the fixed figures. After freezing, it checks if any of the lines(rows in the game screen) are full by calling <code class=\"language-text\">break_lines()</code> and then creating a new Figure instance by calling <code class=\"language-text\">create_figure()</code>. Finally, it checks if the newly created Figure collides with the structure of fixed figures immediately upon creation, in order to sense if the game should be over, and if it is then it sets the game state to <code class=\"language-text\">gameover</code> thereby ending the game</li>\n<li><code class=\"language-text\">def break_lines(self)</code>: Main purpose of this method is to check if any of the rows in the game screen, also known as lines, are completely filled with Figures. If so then it take that row’s most immediate top row and replaces it’s own row with that top row, which effectively deletes completely full rows, pushes down incomplete rows and increments the score for each row that was deleted. As a bonus if multiple rows are deleted at once then twice the normal amount of points are awarded. Finally, it adds the amount of lines cleared to <code class=\"language-text\">lines_cleared</code> and calls <code class=\"language-text\">check_level_up()</code> in order to check if the next level can be reached</li>\n<li><code class=\"language-text\">def check_level_up(self)</code>: The method that checks if the next level can be achieved is this one. If the required amount of lines were cleared then it returns <code class=\"language-text\">True</code>. If not, then it calculates the amount of lines needed to be cleared and assigns that value to the <code class=\"language-text\">lines_to_clear</code> global variable </li>\n<li><code class=\"language-text\">def go_space(self)</code>: If the <code class=\"language-text\">down</code> arrow key is held then this method makes the currently falling Figure travel at a much faster speed until the <code class=\"language-text\">down</code> arrow is released or when it collides with a fixed figure at which point that Figure is frozen via <code class=\"language-text\">freeze_figure()</code>. Note: the event listeners for the `<code class=\"language-text\">down</code> arrow key are located in the main() method</li>\n<li><code class=\"language-text\">def go_down(self)</code>: Similar to <code class=\"language-text\">go_space()</code> except that this method only makes the current Figure fall at a rate of one tile per method call. </li>\n<li><code class=\"language-text\">def go_sideways(self, dx)</code>: This method makes the current Figure move to the sides when called. The <code class=\"language-text\">dx</code> parameter controls which direction to go, <code class=\"language-text\">1</code> for right side and <code class=\"language-text\">-1</code> for left side. Note: the direction will be supplied from <code class=\"language-text\">main()</code></li>\n<li><code class=\"language-text\">def rotate(self)</code>: Serves to rotate the current Figure when called. If the next rotation collides with a fixed figure on game screen then it reverts back to the original rotation. </li>\n</ul>\n<p>In the next post I will cover the implementation of the <code class=\"language-text\">main()</code> function along with other details. Stay tuned and thanks for reading my blog post!</p>\n<h3>Closing Notes</h3>\n<p>Well that’s all for today, I hope you found this tutorial helpful. I would greatly appreciate if you could check out my <a href=\"https://www.youtube.com/channel/UCtxed_NljgtAXrQMMdLvhrQ?\">Youtube channel</a>, <a href=\"https://www.linkedin.com/in/shehan-a-780622126/\">LinkedIn</a> and <a href=\"https://github.com/ShehanAT\">Github</a>.</p>","frontmatter":{"title":"How to build a Tetris game in Python using Pygame part 1","date":"March 20, 2021","description":"This tutorial shows how to build a Tetris game in Python using Pygame"}}},"pageContext":{"slug":"/03-20-2021/","previous":{"fields":{"slug":"/10-25-2019/"},"frontmatter":{"title":"Authentication in Ruby On Rails"}},"next":{"fields":{"slug":"/03-22-2021/"},"frontmatter":{"title":"How to build a Tetris game in Python using Pygame part 2"}}}},"staticQueryHashes":["426816048","63159454"]}